<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Edit Product</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f5f6fa;
      }
      .form-container {
        max-width: 800px;
        margin: auto;
      }
      .form-card {
        background-color: #fff;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
      }
      .image-preview img {
        height: 90px;
        margin-right: 10px;
        object-fit: cover;
        border-radius: 8px;
        border: 1px solid #ccc;
      }
      .section-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <%- include("./pages/navbar") %> <%- include('./pages/flashes') %>

    <div class="container py-5 form-container">
      <div class="form-card">
        <h3 class="mb-4 text-center text-primary">Edit Product</h3>
        <form
          method="post"
          action="/products/update/<%= data._id %>"
          enctype="multipart/form-data"
        >
          <!-- Product Name -->
          <div class="mb-3">
            <label for="productName" class="form-label">Product Name</label>
            <input
              type="text"
              class="form-control"
              id="productName"
              name="productName"
              value="<%= data.productName %>"
            />
          </div>

          <!-- Product Description -->
          <div class="mb-3">
            <label for="productDesc" class="form-label"
              >Product Description</label
            >
            <input
              type="text"
              class="form-control"
              id="productDesc"
              name="productDesc"
              value="<%= data.productDesc %>"
            />
          </div>

          <!-- Price -->
          <div class="mb-3">
            <label for="price" class="form-label">Price ($)</label>
            <input
              type="number"
              class="form-control"
              id="price"
              name="price"
              value="<%= data.price %>"
            />
          </div>

          <!-- Sizes -->
          <div class="mb-3">
            <label class="form-label">Available Sizes</label>
            <div class="d-flex flex-wrap gap-2">
              <% ["S", "M", "L", "XL", "XXL"].forEach(size => { %> <input
              type="checkbox" class="btn-check" name="size[]" value="<%= size
              %>" id="size_<%= size %>" <%= data.size &&
              data.size.includes(size) ? "checked" : "" %>>
              <label class="btn btn-outline-dark btn-sm" for="size_<%= size %>"
                ><%= size %></label
              >
              <% }) %>
            </div>
          </div>

          <!-- Colors -->
          <div class="mb-3">
            <label class="form-label">Available Colors</label>
            <div class="d-flex flex-wrap gap-2">
              <% ["Red", "Green", "Yellow", "Blue", "Black",
              "White"].forEach(color => { %> <input type="checkbox"
              class="btn-check" name="color[]" value="<%= color %>"
              id="color_<%= color %>" <%= data.color &&
              data.color.includes(color) ? "checked" : "" %>>
              <label
                class="btn btn-outline-secondary btn-sm"
                for="color_<%= color %>"
                ><%= color %></label
              >
              <% }) %>
            </div>
          </div>

          <!-- Brand -->
          <div class="mb-3">
            <label for="brand" class="form-label">Brand</label>
            <input
              type="text"
              class="form-control"
              id="brand"
              name="brand"
              value="<%= data.brand %>"
            />
          </div>

          <!-- Existing Images -->
          <% if (data.image && data.image.length > 0) { %>
          <div class="mb-3">
            <label class="form-label">Current Images</label>
            <div class="image-preview d-flex flex-wrap">
              <% data.image.forEach(function(img) { %>
              <img src="<%= img %>" alt="Product Image" />
              <% }); %>
            </div>
          </div>
          <% } %>

          <!-- New Images -->
          <div class="mb-4">
            <label for="image" class="form-label">Upload New Images</label>
            <input
              type="file"
              class="form-control"
              id="image"
              name="image"
              multiple
              accept="image/*"
            />
          </div>

          <!-- Submit -->
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">
              Update Product
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
